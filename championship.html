<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¡çº³é…’å§å·…å³°èµ› - Canary Bar Championship</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { overflow-x: hidden; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const defaultLevels = [
      { smallBlind: 50, bigBlind: 100, ante: 0, duration: 20 },
      { smallBlind: 100, bigBlind: 200, ante: 0, duration: 20 },
      { smallBlind: 150, bigBlind: 300, ante: 0, duration: 20 },
      { smallBlind: 200, bigBlind: 400, ante: 400, duration: 20 },
      { smallBlind: 400, bigBlind: 800, ante: 800, duration: 20 },
      { smallBlind: 500, bigBlind: 1000, ante: 1000, duration: 20 },
      { smallBlind: 700, bigBlind: 1400, ante: 1400, duration: 20 },
      { smallBlind: 1000, bigBlind: 2000, ante: 2000, duration: 20 },
      { smallBlind: 1500, bigBlind: 3000, ante: 3000, duration: 20 },
      { smallBlind: 2000, bigBlind: 4000, ante: 4000, duration: 20 },
      { smallBlind: 3000, bigBlind: 6000, ante: 6000, duration: 20 },
      { smallBlind: 4000, bigBlind: 8000, ante: 8000, duration: 20 },
      { smallBlind: 5000, bigBlind: 10000, ante: 10000, duration: 20 },
    ];

    const PokerChip = ({ size = 40 }) => (
      <svg width={size} height={size} viewBox="0 0 200 200">
        <ellipse cx="100" cy="15" rx="20" ry="15" fill="#1a1a1a" />
        <ellipse cx="100" cy="185" rx="20" ry="15" fill="#1a1a1a" />
        <ellipse cx="15" cy="100" rx="15" ry="20" fill="#1a1a1a" />
        <ellipse cx="185" cy="100" rx="15" ry="20" fill="#1a1a1a" />
        <circle cx="100" cy="100" r="70" fill="#1a1a1a" />
        <circle cx="100" cy="100" r="55" fill="none" stroke="#FF8030" strokeWidth="6" />
        <circle cx="100" cy="100" r="40" fill="#1a1a1a" />
      </svg>
    );

    // æ‰‘å…‹ç‰ŒèŠ±è‰²ç»„ä»¶
    const CardSuit = ({ suit, size = 30, style }) => {
      const suits = {
        spade: { symbol: 'â™ ', color: '#ffffff' },
        heart: { symbol: 'â™¥', color: '#FF8030' },
        diamond: { symbol: 'â™¦', color: '#FF8030' },
        club: { symbol: 'â™£', color: '#ffffff' }
      };
      const s = suits[suit];
      return (
        <div style={{ fontSize: size, color: s.color, opacity: 0.08, ...style }}>{s.symbol}</div>
      );
    };

    // æ‰‘å…‹ç‰Œç»„ä»¶
    const PokerCard = ({ rank, suit, style }) => {
      const isRed = suit === 'heart' || suit === 'diamond';
      const suitSymbols = { spade: 'â™ ', heart: 'â™¥', diamond: 'â™¦', club: 'â™£' };
      return (
        <div style={{
          width: '60px',
          height: '84px',
          background: 'rgba(255,255,255,0.03)',
          borderRadius: '8px',
          border: '1px solid rgba(255,255,255,0.08)',
          display: 'flex',
          flexDirection: 'column',
          justifyContent: 'space-between',
          padding: '6px',
          position: 'absolute',
          backdropFilter: 'blur(2px)',
          ...style
        }}>
          <div style={{ color: isRed ? 'rgba(255,128,48,0.3)' : 'rgba(255,255,255,0.2)', fontSize: '14px', fontWeight: 'bold', lineHeight: 1 }}>
            {rank}<br/>{suitSymbols[suit]}
          </div>
          <div style={{ color: isRed ? 'rgba(255,128,48,0.3)' : 'rgba(255,255,255,0.2)', fontSize: '24px', textAlign: 'center' }}>
            {suitSymbols[suit]}
          </div>
        </div>
      );
    };

    // ç­¹ç å †ç»„ä»¶
    const ChipStack = ({ count = 5, style }) => (
      <div style={{ position: 'absolute', ...style }}>
        {[...Array(count)].map((_, i) => (
          <div key={i} style={{
            width: '40px',
            height: '40px',
            borderRadius: '50%',
            background: i % 2 === 0 ? 'rgba(255,128,48,0.15)' : 'rgba(255,255,255,0.08)',
            border: '2px solid rgba(255,128,48,0.2)',
            position: 'absolute',
            top: -i * 6,
            boxShadow: '0 2px 4px rgba(0,0,0,0.3)'
          }} />
        ))}
      </div>
    );

    // è·å–æˆ¿é—´ID
    const getRoomId = () => {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('room') || '1';
    };

    const getStorageKey = () => {
      return `pokerTimerData_championship_room${getRoomId()}`;
    };

    const syncToStorage = (data) => {
      localStorage.setItem(getStorageKey(), JSON.stringify({ ...data, timestamp: Date.now() }));
    };

    const getFromStorage = () => {
      const data = localStorage.getItem(getStorageKey());
      return data ? JSON.parse(data) : null;
    };

    // å£ä»¤é…ç½®
    const PASSWORDS = {
      '1': '6789',  // æ—¶ä»£å¤©è¡—åº—å£ä»¤
      '2': '9999'   // ä¹è¡—åº—å£ä»¤
    };

    function PokerTournamentTimer() {
      const urlParams = new URLSearchParams(window.location.search);
      const isDisplayMode = urlParams.get('mode') === 'display';
      const roomId = urlParams.get('room') || '1';
      
      // å£ä»¤éªŒè¯çŠ¶æ€
      const [isAuthenticated, setIsAuthenticated] = useState(false);
      const [passwordInput, setPasswordInput] = useState('');
      const [passwordError, setPasswordError] = useState(false);

      // æ£€æŸ¥æ˜¯å¦å·²éªŒè¯ï¼ˆä»sessionStorageè¯»å–ï¼‰
      useEffect(() => {
        const authKey = `poker_auth_${roomId}`;
        const isAuth = sessionStorage.getItem(authKey) === 'true';
        setIsAuthenticated(isAuth);
      }, [roomId]);

      const handlePasswordSubmit = () => {
        if (passwordInput === PASSWORDS[roomId]) {
          const authKey = `poker_auth_${roomId}`;
          sessionStorage.setItem(authKey, 'true');
          setIsAuthenticated(true);
          setPasswordError(false);
        } else {
          setPasswordError(true);
        }
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter') {
          handlePasswordSubmit();
        }
      };

      const [levels, setLevels] = useState(defaultLevels);
      const [currentLevel, setCurrentLevel] = useState(0);
      const [timeLeft, setTimeLeft] = useState(defaultLevels[0].duration * 60);
      const [isRunning, setIsRunning] = useState(false);
      const [showSettings, setShowSettings] = useState(false);
      const [showControlPanel, setShowControlPanel] = useState(true);
      const [confirmDialog, setConfirmDialog] = useState({ show: false, message: '', onConfirm: null });
      const [newLevel, setNewLevel] = useState({ smallBlind: '', bigBlind: '', ante: '', duration: '' });
      const [totalPlayers, setTotalPlayers] = useState(10);
      const [remainingPlayers, setRemainingPlayers] = useState(10);
      const [startingChips, setStartingChips] = useState(20000);
      const [totalChips, setTotalChips] = useState(200000);
      const [prizeStructure, setPrizeStructure] = useState([
        { place: 1, percent: 50 },
        { place: 2, percent: 30 },
        { place: 3, percent: 20 },
      ]);
      const [showLevelUp, setShowLevelUp] = useState(false);
      const [newLevelInfo, setNewLevelInfo] = useState(null);
      const [currentTime, setCurrentTime] = useState(new Date());
      const audioRef = useRef(null);
      const lastSyncRef = useRef(0);

      // è‡ªåŠ¨è®¡ç®—æ€»ç­¹ç ï¼ˆå½“äººæ•°æˆ–èµ·å§‹ç­¹ç å˜åŒ–æ—¶ï¼‰
      useEffect(() => {
        if (!isDisplayMode) {
          setTotalChips(totalPlayers * startingChips);
        }
      }, [totalPlayers, startingChips, isDisplayMode]);

      const syncData = () => {
        if (!isDisplayMode) {
          syncToStorage({ levels, currentLevel, timeLeft, isRunning, totalPlayers, remainingPlayers, startingChips, totalChips, prizeStructure, showLevelUp, newLevelInfo });
        }
      };

      useEffect(() => { syncData(); }, [levels, currentLevel, timeLeft, isRunning, totalPlayers, remainingPlayers, startingChips, totalChips, prizeStructure, showLevelUp, newLevelInfo]);

      useEffect(() => {
        if (isDisplayMode) {
          const handleStorageChange = () => {
            const data = getFromStorage();
            if (data && data.timestamp > lastSyncRef.current) {
              lastSyncRef.current = data.timestamp;
              setLevels(data.levels);
              setCurrentLevel(data.currentLevel);
              setTimeLeft(data.timeLeft);
              setIsRunning(data.isRunning);
              setTotalPlayers(data.totalPlayers);
              setRemainingPlayers(data.remainingPlayers);
              setStartingChips(data.startingChips);
              setTotalChips(data.totalChips);
              if (data.prizeStructure !== undefined) setPrizeStructure(data.prizeStructure);
              if (data.showLevelUp !== undefined) setShowLevelUp(data.showLevelUp);
              if (data.newLevelInfo !== undefined) setNewLevelInfo(data.newLevelInfo);
            }
          };
          const interval = setInterval(handleStorageChange, 100);
          handleStorageChange();
          window.addEventListener('storage', handleStorageChange);
          return () => { clearInterval(interval); window.removeEventListener('storage', handleStorageChange); };
        }
      }, [isDisplayMode]);

      useEffect(() => {
        const timer = setInterval(() => setCurrentTime(new Date()), 1000);
        return () => clearInterval(timer);
      }, []);

      const formatBeijingTime = () => currentTime.toLocaleTimeString('zh-CN', { timeZone: 'Asia/Shanghai', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
      const formatBeijingDate = () => currentTime.toLocaleDateString('zh-CN', { timeZone: 'Asia/Shanghai', month: '2-digit', day: '2-digit', weekday: 'short' });

      // è¯­éŸ³æç¤ºå‡½æ•°
      const speakText = (text) => {
        if ('speechSynthesis' in window) {
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = 'zh-CN';
          utterance.rate = 0.9;
          utterance.pitch = 1;
          utterance.volume = 1;
          window.speechSynthesis.speak(utterance);
        }
      };

      useEffect(() => {
        if (isDisplayMode) return;
        let interval = null;
        if (isRunning && timeLeft > 0) {
          interval = setInterval(() => setTimeLeft((time) => time - 1), 1000);
        } else if (timeLeft === 0 && isRunning) {
          if (audioRef.current) audioRef.current.play().catch(() => {});
          // è¯­éŸ³æç¤ºç›²æ³¨å‡çº§
          speakText('ç›²æ³¨å‡çº§');
          
          if (currentLevel < levels.length - 1) {
            const nextLevel = levels[currentLevel + 1];
            // æ˜¾ç¤ºå‡çº§å¼¹çª—
            setNewLevelInfo({
              level: currentLevel + 2,
              smallBlind: nextLevel.smallBlind,
              bigBlind: nextLevel.bigBlind,
              ante: nextLevel.ante
            });
            setShowLevelUp(true);
            
            // 5ç§’åè‡ªåŠ¨å…³é—­å¼¹çª—
            setTimeout(() => {
              setShowLevelUp(false);
              setNewLevelInfo(null);
            }, 5000);
            
            setCurrentLevel((prev) => prev + 1);
            setTimeLeft(levels[currentLevel + 1].duration * 60);
          } else {
            setIsRunning(false);
          }
        }
        return () => clearInterval(interval);
      }, [isRunning, timeLeft, currentLevel, levels, isDisplayMode]);

      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      };

      const handleStart = () => setIsRunning(true);
      const handlePause = () => setIsRunning(false);
      const handlePrevLevel = () => {
        if (currentLevel > 0) {
          setConfirmDialog({
            show: true, message: 'ç¡®è®¤è¿”å›ä¸Šä¸€çº§ï¼Ÿ\nConfirm to go to previous level?',
            onConfirm: () => { setCurrentLevel(currentLevel - 1); setTimeLeft(levels[currentLevel - 1].duration * 60); setConfirmDialog({ show: false, message: '', onConfirm: null }); }
          });
        }
      };
      const handleNextLevel = () => {
        if (currentLevel < levels.length - 1) {
          setConfirmDialog({
            show: true, message: 'ç¡®è®¤è·³åˆ°ä¸‹ä¸€çº§ï¼Ÿ\nConfirm to go to next level?',
            onConfirm: () => { setCurrentLevel(currentLevel + 1); setTimeLeft(levels[currentLevel + 1].duration * 60); setConfirmDialog({ show: false, message: '', onConfirm: null }); }
          });
        }
      };
      const handleReset = () => {
        setConfirmDialog({
          show: true, message: 'ç¡®è®¤é‡ç½®å½“å‰çº§åˆ«å€’è®¡æ—¶ï¼Ÿ\nConfirm to reset current level timer?',
          onConfirm: () => { setTimeLeft(levels[currentLevel].duration * 60); setConfirmDialog({ show: false, message: '', onConfirm: null }); }
        });
      };
      const handlePlayerOut = () => { if (remainingPlayers > 1) setRemainingPlayers(remainingPlayers - 1); };
      const handlePlayerBack = () => { setRemainingPlayers(remainingPlayers + 1); setTotalPlayers(Math.max(totalPlayers, remainingPlayers + 1)); };
      const handleChipsAdd = () => { setTotalChips(totalChips + startingChips); };
      const handleChipsRemove = () => { if (totalChips > startingChips) setTotalChips(totalChips - startingChips); };
      const averageChips = remainingPlayers > 0 ? Math.round(totalChips / remainingPlayers) : 0;
      
      const totalPercent = prizeStructure.reduce((sum, p) => sum + p.percent, 0);
      const handleAddPrizePlace = () => {
        if (totalPercent < 100) {
          const newPlace = prizeStructure.length + 1;
          setPrizeStructure([...prizeStructure, { place: newPlace, percent: 0 }]);
        }
      };
      const handleRemovePrizePlace = () => {
        if (prizeStructure.length > 1) {
          setPrizeStructure(prizeStructure.slice(0, -1));
        }
      };
      const handlePrizePercentChange = (index, value) => {
        const newValue = Math.max(0, Math.min(100, parseInt(value) || 0));
        const newStructure = [...prizeStructure];
        const otherTotal = newStructure.reduce((sum, p, i) => i === index ? sum : sum + p.percent, 0);
        newStructure[index].percent = Math.min(newValue, 100 - otherTotal);
        setPrizeStructure(newStructure);
      };

      const handleAddLevel = () => {
        if (newLevel.smallBlind && newLevel.bigBlind && newLevel.duration) {
          setLevels([...levels, { smallBlind: parseInt(newLevel.smallBlind), bigBlind: parseInt(newLevel.bigBlind), ante: parseInt(newLevel.ante) || 0, duration: parseInt(newLevel.duration) }]);
          setNewLevel({ smallBlind: '', bigBlind: '', ante: '', duration: '' });
        }
      };
      const handleDeleteLevel = (index) => {
        if (levels.length > 1) {
          const newLevels = levels.filter((_, i) => i !== index);
          setLevels(newLevels);
          if (currentLevel >= newLevels.length) { setCurrentLevel(newLevels.length - 1); setTimeLeft(newLevels[newLevels.length - 1].duration * 60); }
        }
      };
      const handleSaveEdit = (index, field, value) => {
        const newLevels = [...levels];
        newLevels[index][field] = parseInt(value) || 0;
        setLevels(newLevels);
        if (index === currentLevel && field === 'duration') setTimeLeft(parseInt(value) * 60 || 0);
      };

      const openDisplayWindow = () => {
        const url = window.location.href.split('?')[0] + '?room=' + roomId + '&mode=display';
        window.open(url, 'PokerTimerDisplay', 'width=1920,height=1080');
      };

      const current = levels[currentLevel];
      const next = levels[currentLevel + 1];
      const progress = ((current.duration * 60 - timeLeft) / (current.duration * 60)) * 100;
      const isLowTime = timeLeft <= 60;

      const inputStyle = { background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,128,48,0.3)', color: '#e0e0e0', padding: '8px 12px', fontSize: '14px', width: '80px', textAlign: 'center', borderRadius: '10px' };
      const inputStyleLarge = { background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,128,48,0.3)', color: '#e0e0e0', padding: '12px 16px', fontSize: '16px', width: '100%', boxSizing: 'border-box', borderRadius: '12px' };
      const labelStyle = { display: 'block', fontSize: '12px', color: 'rgba(255,255,255,0.6)', marginBottom: '8px', letterSpacing: '1px' };
      const labelEngStyle = { fontSize: '10px', color: 'rgba(255,255,255,0.3)', fontFamily: 'Arial, sans-serif', marginLeft: '5px' };
      const controlButtonStyle = { background: 'transparent', border: '1px solid rgba(255,255,255,0.3)', color: '#e0e0e0', padding: '15px 20px', cursor: 'pointer', fontSize: '18px', letterSpacing: '2px', transition: 'all 0.3s ease', fontFamily: "'Bebas Neue', 'Arial Black', sans-serif", textAlign: 'center', borderRadius: '16px', width: '130px' };
      const buttonSubtextStyle = { fontSize: '10px', opacity: 0.5, fontFamily: 'Arial, sans-serif', marginTop: '2px' };
      const headerSubStyle = { fontSize: '9px', color: 'rgba(255,255,255,0.4)', fontFamily: 'Arial, sans-serif', fontWeight: 'normal', marginTop: '2px' };

      // å£ä»¤éªŒè¯ç•Œé¢
      if (!isAuthenticated) {
        return (
          <div style={{ minHeight: '100vh', background: 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%)', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', fontFamily: '"Microsoft YaHei", "PingFang SC", sans-serif' }}>
            <img src="canary-logo.png" alt="Logo" style={{ width: '120px', height: '120px', marginBottom: '30px', filter: 'drop-shadow(0 0 20px rgba(255, 128, 48, 0.3))' }} />
            <h1 style={{ color: '#FF8030', fontSize: '36px', letterSpacing: '8px', marginBottom: '10px' }}>å¡çº³é…’å§å·…å³°èµ›</h1>
            <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px', marginBottom: '40px' }}>{roomId === '1' ? 'æ—¶ä»£å¤©è¡—åº—' : 'ä¹è¡—åº—'}</p>
            <div style={{ background: 'rgba(0,0,0,0.5)', padding: '40px', borderRadius: '20px', border: '1px solid rgba(255,128,48,0.3)', textAlign: 'center' }}>
              <p style={{ color: 'rgba(255,255,255,0.7)', marginBottom: '20px', fontSize: '16px' }}>è¯·è¾“å…¥å£ä»¤</p>
              <input 
                type="password" 
                value={passwordInput}
                onChange={(e) => setPasswordInput(e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="è¾“å…¥å£ä»¤..."
                style={{ 
                  background: 'rgba(255,255,255,0.1)', 
                  border: passwordError ? '2px solid #e05555' : '1px solid rgba(255,128,48,0.3)', 
                  color: '#e0e0e0', 
                  padding: '15px 20px', 
                  fontSize: '18px', 
                  width: '250px', 
                  textAlign: 'center', 
                  borderRadius: '12px',
                  outline: 'none'
                }} 
              />
              {passwordError && <p style={{ color: '#e05555', marginTop: '15px', fontSize: '14px' }}>å£ä»¤é”™è¯¯ï¼Œè¯·é‡è¯•</p>}
              <button 
                onClick={handlePasswordSubmit}
                style={{ 
                  display: 'block',
                  width: '250px',
                  marginTop: '20px', 
                  padding: '15px 40px', 
                  background: '#FF8030', 
                  border: 'none', 
                  color: '#fff', 
                  fontSize: '18px', 
                  borderRadius: '12px', 
                  cursor: 'pointer',
                  letterSpacing: '3px'
                }}
              >
                è¿›å…¥
              </button>
            </div>
            <a href="championship-select.html" style={{ color: 'rgba(255,255,255,0.4)', marginTop: '30px', textDecoration: 'none', fontSize: '14px' }}>â† è¿”å›é€‰æ‹©åº—é“º</a>
          </div>
        );
      }

      return (
        <div style={{ minHeight: '100vh', background: 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%)', fontFamily: "'Bebas Neue', 'Arial Black', sans-serif", color: '#e0e0e0', position: 'relative', overflow: 'hidden' }}>
          <div style={{ position: 'absolute', inset: 0, backgroundImage: 'radial-gradient(circle at 50% 50%, rgba(255,128,48,0.03) 0%, transparent 50%), radial-gradient(circle at 20% 80%, rgba(255,128,48,0.02) 0%, transparent 30%), radial-gradient(circle at 80% 20%, rgba(255,128,48,0.02) 0%, transparent 30%)', pointerEvents: 'none' }} />
          
          {/* æ‰‘å…‹ç‰Œè£…é¥° - å·¦ä¾§ */}
          <PokerCard rank="A" suit="spade" style={{ top: '15%', left: '2%', transform: 'rotate(-15deg)' }} />
          <PokerCard rank="K" suit="heart" style={{ top: '32%', left: '4%', transform: 'rotate(8deg)' }} />
          <PokerCard rank="Q" suit="diamond" style={{ bottom: '35%', left: '1%', transform: 'rotate(-22deg)' }} />
          <PokerCard rank="J" suit="club" style={{ bottom: '18%', left: '3%', transform: 'rotate(12deg)' }} />
          
          {/* æ‰‘å…‹ç‰Œè£…é¥° - å³ä¾§ */}
          <PokerCard rank="A" suit="heart" style={{ top: '18%', right: '2%', transform: 'rotate(18deg)' }} />
          <PokerCard rank="K" suit="spade" style={{ top: '35%', right: '4%', transform: 'rotate(-12deg)' }} />
          <PokerCard rank="10" suit="diamond" style={{ bottom: '38%', right: '1%', transform: 'rotate(15deg)' }} />
          <PokerCard rank="9" suit="club" style={{ bottom: '20%', right: '3%', transform: 'rotate(-8deg)' }} />

          {/* èŠ±è‰²è£…é¥° */}
          <CardSuit suit="spade" size={150} style={{ position: 'absolute', top: '8%', left: '12%' }} />
          <CardSuit suit="heart" size={100} style={{ position: 'absolute', top: '55%', left: '6%' }} />
          <CardSuit suit="diamond" size={120} style={{ position: 'absolute', bottom: '12%', right: '12%' }} />
          <CardSuit suit="club" size={110} style={{ position: 'absolute', top: '10%', right: '15%' }} />
          <CardSuit suit="heart" size={80} style={{ position: 'absolute', top: '45%', right: '3%' }} />
          <CardSuit suit="spade" size={90} style={{ position: 'absolute', bottom: '40%', left: '10%' }} />
          <CardSuit suit="diamond" size={70} style={{ position: 'absolute', top: '70%', right: '8%' }} />
          <CardSuit suit="club" size={60} style={{ position: 'absolute', bottom: '8%', left: '18%' }} />

          {/* å¤§ç­¹ç è£…é¥° */}
          <div style={{ position: 'absolute', top: '12%', left: '6%', opacity: 0.05, transform: 'rotate(-15deg)' }}><PokerChip size={100} /></div>
          <div style={{ position: 'absolute', bottom: '12%', right: '6%', opacity: 0.05, transform: 'rotate(20deg)' }}><PokerChip size={90} /></div>
          <div style={{ position: 'absolute', top: '40%', right: '1%', opacity: 0.04, transform: 'rotate(10deg)' }}><PokerChip size={70} /></div>

          <audio ref={audioRef} preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleQEOS9PzzIk7AD6v4eSZTwAQgNHsqWkABWq66bF7DwBSpNzHjTMAIYrQ37RrAARptuq4fhAAWKngy5E3ACeS1d+1agAIcrjptYIQAF2s4MyTOAAqltbftmkAC3a67LSCDwBhsOHMlDgALZnX37ZoAA56vOyygA8AZbLhzJQ4AC+b2N+1ZwARfb7srH8OAGm04suUOAAxndjftGYAFIDArKp9DQBttuLKkzcAM5/Z37NkABeEwqunewwAcbjhyZI3ADWB2t+yYwAaiMOnpHoLAHW64ceRNgA3g9vfsGEAHYvEpKF4CgB5vODFjzUAOYbc3q5fACCOxqGedwkAfb7fwow0ADuJ3d2sXQAjkcegm3UIAIC/3b+KNAA9i97cqVsAJpTHnph0BwCEwd27iDMAP43f26daACmXyJuVcgYAh8LcuIYyAEGP4NsOWQAsnMmYknEFAIrE27WEMQBDkeDbTFcAL5/KlI9vBACNxdqygjAARadg3KtWADKhy5GPbgMAkMbZr4AvAEiD4ttqVAA1pMyNjGwCAJPI2KyALgBKheLbZ1IAOKfNioluAQCWydetfC0ATIfj21hQADuqzoaMbQAAmcvWqnssAE6J49tVTgA+rM+Dim0AAJzM1ad6KwBQi+TbUkwAQa/QgYhuAACfzaTelCoAUo3k20hKAESx0X+GbgAAos+j3JEpAFSP5ds/SABAAE6T5ds3RgBJtdJ7gm0AAKnRn9iNJwBYkubbMEMAT7jUeIBtAACt0p3ViSYAWpTo2ypBAAAAAAAA" type="audio/wav" />
          </audio>

          {/* Header */}
          <div style={{ padding: isDisplayMode ? '12px 30px' : '20px 40px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', borderBottom: '1px solid rgba(255,128,48,0.3)', position: 'relative', zIndex: 10, background: 'rgba(26, 26, 26, 0.95)' }}>
            <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>
              <img src="canary-logo.png" alt="Canary Bar Logo" style={{ height: isDisplayMode ? '70px' : '100px', width: 'auto', objectFit: 'contain' }} />
              <div>
                <h1 style={{ margin: 0, fontSize: isDisplayMode ? '28px' : '36px', letterSpacing: '8px', color: '#FF8030', fontFamily: '"Microsoft YaHei", "PingFang SC", "Noto Sans SC", sans-serif', fontWeight: '600' }}>å¡çº³é…’å§å·…å³°èµ›</h1>
                <p style={{ margin: '5px 0 0 0', fontSize: isDisplayMode ? '10px' : '12px', letterSpacing: '3px', color: 'rgba(255,255,255,0.5)', fontFamily: 'Arial, sans-serif' }}>CANARY BAR CHAMPIONSHIP Â· {roomId === '1' ? 'æ—¶ä»£å¤©è¡—åº—' : 'ä¹è¡—åº—'}</p>
              </div>
            </div>
            <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>
              <div style={{ textAlign: 'center', background: 'rgba(0,0,0,0.3)', padding: isDisplayMode ? '8px 15px' : '12px 20px', borderRadius: '12px', border: '1px solid rgba(255,128,48,0.2)' }}>
                <div style={{ fontSize: isDisplayMode ? '10px' : '12px', color: 'rgba(255,255,255,0.5)', letterSpacing: '2px', marginBottom: '4px' }}>åŒ—äº¬æ—¶é—´ <span style={{ fontFamily: 'Arial, sans-serif', fontSize: isDisplayMode ? '8px' : '10px' }}>BEIJING TIME</span></div>
                <div style={{ fontSize: isDisplayMode ? '22px' : '28px', color: '#FF8030', letterSpacing: '2px', fontFamily: "'Bebas Neue', sans-serif" }}>{formatBeijingTime()}</div>
                <div style={{ fontSize: isDisplayMode ? '10px' : '12px', color: 'rgba(255,255,255,0.4)', fontFamily: 'Arial, sans-serif', marginTop: '2px' }}>{formatBeijingDate()}</div>
              </div>
            </div>
          </div>

          {/* Settings Page */}
          {!isDisplayMode && showSettings ? (
            <div style={{ padding: '40px', maxWidth: '1000px', margin: '0 auto', position: 'relative', zIndex: 10, paddingBottom: '150px' }}>
              <div style={{ marginBottom: '30px' }}>
                <h2 style={{ fontSize: '28px', letterSpacing: '4px', marginBottom: '5px', color: '#FF8030' }}>æ¯”èµ›è®¾ç½®</h2>
                <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.4)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif' }}>TOURNAMENT SETTINGS</div>
              </div>
              <div style={{ background: 'rgba(0,0,0,0.3)', padding: '25px', border: '1px solid rgba(255,128,48,0.2)', borderRadius: '16px', marginBottom: '30px' }}>
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px' }}>
                  <div>
                    <label style={labelStyle}>èµ·å§‹äººæ•° <span style={labelEngStyle}>TOTAL PLAYERS</span></label>
                    <input type="number" value={totalPlayers} onChange={(e) => { const val = parseInt(e.target.value) || 1; setTotalPlayers(val); if (remainingPlayers > val) setRemainingPlayers(val); }} style={inputStyleLarge} />
                  </div>
                  <div>
                    <label style={labelStyle}>èµ·å§‹ç­¹ç  <span style={labelEngStyle}>STARTING CHIPS</span></label>
                    <input type="number" value={startingChips} onChange={(e) => setStartingChips(parseInt(e.target.value) || 0)} style={inputStyleLarge} />
                  </div>
                </div>
              </div>

              {/* å¥–é‡‘è®¾ç½® */}
              <div style={{ marginBottom: '30px' }}>
                <h2 style={{ fontSize: '28px', letterSpacing: '4px', marginBottom: '5px', color: '#FF8030' }}>å¥–é‡‘è®¾ç½®</h2>
                <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.4)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif' }}>PRIZE SETTINGS</div>
              </div>
              
              <div style={{ background: 'rgba(0,0,0,0.3)', padding: '25px', border: '1px solid rgba(255,128,48,0.2)', borderRadius: '16px', marginBottom: '30px' }}>
                <div style={{ marginBottom: '15px' }}>
                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '10px' }}>
                    <span style={{ color: 'rgba(255,255,255,0.6)', fontSize: '14px' }}>å¥–é‡‘åˆ†é…æ¯”ä¾‹ <span style={{ fontSize: '10px', fontFamily: 'Arial, sans-serif' }}>DISTRIBUTION</span></span>
                    <span style={{ color: totalPercent > 100 ? '#e05555' : totalPercent === 100 ? '#50a050' : '#FF8030', fontSize: '14px' }}>å·²åˆ†é…: {totalPercent}%</span>
                  </div>
                  
                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: '15px', marginBottom: '15px' }}>
                    {prizeStructure.map((prize, index) => (
                      <div key={index} style={{ display: 'flex', alignItems: 'center', gap: '8px', background: 'rgba(255,128,48,0.1)', padding: '10px 15px', borderRadius: '10px' }}>
                        <span style={{ color: '#FF8030', fontSize: '14px', minWidth: '50px' }}>ç¬¬{prize.place}å</span>
                        <input 
                          type="number" 
                          value={prize.percent} 
                          onChange={(e) => handlePrizePercentChange(index, e.target.value)}
                          style={{ ...inputStyle, width: '60px' }}
                        />
                        <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px' }}>%</span>
                      </div>
                    ))}
                  </div>
                  
                  <div style={{ display: 'flex', gap: '10px' }}>
                    <button onClick={handleAddPrizePlace} style={{ background: 'rgba(80,160,80,0.3)', border: '1px solid rgba(80,160,80,0.6)', color: '#50a050', padding: '8px 20px', cursor: 'pointer', fontSize: '14px', borderRadius: '8px' }}>+ æ·»åŠ åæ¬¡</button>
                    <button onClick={handleRemovePrizePlace} style={{ background: 'rgba(224,85,85,0.3)', border: '1px solid rgba(224,85,85,0.6)', color: '#e05555', padding: '8px 20px', cursor: 'pointer', fontSize: '14px', borderRadius: '8px' }}>- å‡å°‘åæ¬¡</button>
                  </div>
                </div>
              </div>
              <div style={{ marginBottom: '30px' }}>
                <h2 style={{ fontSize: '28px', letterSpacing: '4px', marginBottom: '5px', color: '#FF8030' }}>ç›²æ³¨çº§åˆ«è®¾ç½®</h2>
                <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.4)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif' }}>BLIND LEVEL SETTINGS</div>
              </div>
              <div style={{ background: 'rgba(0,0,0,0.3)', borderRadius: '16px', overflow: 'hidden', marginBottom: '30px', border: '1px solid rgba(255,128,48,0.2)' }}>
                <div style={{ display: 'grid', gridTemplateColumns: '80px 1fr 1fr 1fr 1fr 100px', padding: '15px 20px', background: 'rgba(255,128,48,0.15)', fontWeight: 'bold', letterSpacing: '1px', fontSize: '14px', color: '#FF8030' }}>
                  <div><div>çº§åˆ«</div><div style={headerSubStyle}>LEVEL</div></div>
                  <div><div>å°ç›²</div><div style={headerSubStyle}>SMALL</div></div>
                  <div><div>å¤§ç›²</div><div style={headerSubStyle}>BIG</div></div>
                  <div><div>å‰æ³¨</div><div style={headerSubStyle}>ANTE</div></div>
                  <div><div>æ—¶é•¿</div><div style={headerSubStyle}>MINS</div></div>
                  <div><div>æ“ä½œ</div><div style={headerSubStyle}>ACTION</div></div>
                </div>
                {levels.map((level, index) => (
                  <div key={index} style={{ display: 'grid', gridTemplateColumns: '80px 1fr 1fr 1fr 1fr 100px', padding: '12px 20px', borderBottom: '1px solid rgba(255,128,48,0.1)', alignItems: 'center', background: index === currentLevel ? 'rgba(255,128,48,0.1)' : 'transparent', color: '#e0e0e0', fontFamily: 'Arial, sans-serif' }}>
                    <span style={{ fontFamily: "'Bebas Neue', sans-serif", fontSize: '20px', color: '#FF8030' }}>{index + 1}</span>
                    <input type="number" value={level.smallBlind} onChange={(e) => handleSaveEdit(index, 'smallBlind', e.target.value)} style={inputStyle} />
                    <input type="number" value={level.bigBlind} onChange={(e) => handleSaveEdit(index, 'bigBlind', e.target.value)} style={inputStyle} />
                    <input type="number" value={level.ante} onChange={(e) => handleSaveEdit(index, 'ante', e.target.value)} style={inputStyle} />
                    <input type="number" value={level.duration} onChange={(e) => handleSaveEdit(index, 'duration', e.target.value)} style={inputStyle} />
                    <button onClick={() => handleDeleteLevel(index)} style={{ background: 'transparent', border: '1px solid rgba(255,128,48,0.5)', color: '#FF8030', padding: '8px 16px', cursor: 'pointer', fontSize: '12px', borderRadius: '10px' }}>åˆ é™¤</button>
                  </div>
                ))}
              </div>
              <div style={{ background: 'rgba(0,0,0,0.3)', padding: '25px', border: '1px solid rgba(255,128,48,0.2)', borderRadius: '16px' }}>
                <div style={{ marginBottom: '20px' }}>
                  <h3 style={{ fontSize: '20px', letterSpacing: '2px', marginBottom: '5px', color: '#FF8030' }}>æ·»åŠ æ–°çº§åˆ«</h3>
                  <div style={{ fontSize: '10px', color: 'rgba(255,255,255,0.4)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif' }}>ADD NEW LEVEL</div>
                </div>
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr 1fr 1fr auto', gap: '15px', alignItems: 'end' }}>
                  <div><label style={labelStyle}>å°ç›² <span style={labelEngStyle}>SMALL</span></label><input type="number" value={newLevel.smallBlind} onChange={(e) => setNewLevel({...newLevel, smallBlind: e.target.value})} placeholder="100" style={inputStyleLarge} /></div>
                  <div><label style={labelStyle}>å¤§ç›² <span style={labelEngStyle}>BIG</span></label><input type="number" value={newLevel.bigBlind} onChange={(e) => setNewLevel({...newLevel, bigBlind: e.target.value})} placeholder="200" style={inputStyleLarge} /></div>
                  <div><label style={labelStyle}>å‰æ³¨ <span style={labelEngStyle}>ANTE</span></label><input type="number" value={newLevel.ante} onChange={(e) => setNewLevel({...newLevel, ante: e.target.value})} placeholder="0" style={inputStyleLarge} /></div>
                  <div><label style={labelStyle}>æ—¶é•¿ <span style={labelEngStyle}>MINS</span></label><input type="number" value={newLevel.duration} onChange={(e) => setNewLevel({...newLevel, duration: e.target.value})} placeholder="20" style={inputStyleLarge} /></div>
                  <button onClick={handleAddLevel} style={{ background: 'rgba(255,128,48,0.8)', border: 'none', color: '#1a1a1a', padding: '15px 30px', cursor: 'pointer', fontSize: '16px', letterSpacing: '2px', fontFamily: "'Bebas Neue', sans-serif", borderRadius: '12px' }}>æ·»åŠ </button>
                </div>
              </div>
            </div>
          ) : (
            <div style={{ display: 'flex', padding: isDisplayMode ? '15px 25px' : '20px 30px', height: isDisplayMode ? 'calc(100vh - 140px)' : 'auto', minHeight: isDisplayMode ? 'auto' : 'calc(100vh - 250px)', position: 'relative', zIndex: 10, gap: '20px', overflow: 'hidden' }}>
              
              {/* å·¦ä¾§ç›²æ³¨çº§åˆ«åˆ—è¡¨ */}
              <div style={{ width: isDisplayMode ? '280px' : '320px', background: 'rgba(0,0,0,0.4)', borderRadius: '16px', border: '1px solid rgba(255,128,48,0.3)', padding: isDisplayMode ? '12px' : '25px', display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>
                <div style={{ textAlign: 'center', marginBottom: isDisplayMode ? '8px' : '18px', paddingBottom: isDisplayMode ? '6px' : '15px', borderBottom: '1px solid rgba(255,128,48,0.2)', flexShrink: 0 }}>
                  <div style={{ fontSize: isDisplayMode ? '18px' : '24px', color: '#FF8030', letterSpacing: '4px', fontWeight: 'bold' }}>ç›²æ³¨çº§åˆ«</div>
                  <div style={{ fontSize: isDisplayMode ? '9px' : '13px', color: 'rgba(255,255,255,0.4)', fontFamily: 'Arial, sans-serif', marginTop: '3px' }}>BLIND LEVELS</div>
                </div>
                <div style={{ flex: 1, overflowY: isDisplayMode ? 'hidden' : 'auto', overflowX: 'hidden' }}>
                  {levels.map((level, index) => (
                    <div key={index} style={{ 
                      padding: isDisplayMode ? '5px 10px' : '14px 16px', 
                      marginBottom: isDisplayMode ? '2px' : '8px',
                      background: index === currentLevel ? 'rgba(255,128,48,0.25)' : index < currentLevel ? 'rgba(255,255,255,0.02)' : 'rgba(255,255,255,0.05)',
                      borderRadius: isDisplayMode ? '8px' : '10px',
                      border: index === currentLevel ? '2px solid #FF8030' : '1px solid rgba(255,255,255,0.05)',
                      opacity: index < currentLevel ? 0.5 : 1,
                      transition: 'all 0.3s ease'
                    }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                        <span style={{ fontSize: isDisplayMode ? '16px' : '22px', color: index === currentLevel ? '#FF8030' : 'rgba(255,255,255,0.6)', fontWeight: index === currentLevel ? 'bold' : 'normal' }}>L{index + 1}</span>
                        <span style={{ fontSize: isDisplayMode ? '20px' : '28px', color: index === currentLevel ? '#FF8030' : 'rgba(255,255,255,0.8)', fontWeight: 'bold' }}>{level.smallBlind}/{level.bigBlind}</span>
                      </div>
                      {level.ante > 0 && (
                        <div style={{ fontSize: isDisplayMode ? '13px' : '18px', color: index === currentLevel ? '#FF8030' : 'rgba(255,255,255,0.5)', textAlign: 'right', marginTop: isDisplayMode ? '1px' : '4px' }}>å‰æ³¨ {level.ante}</div>
                      )}
                    </div>
                  ))}
                </div>
              </div>

              {/* ä¸­é—´ä¸»å†…å®¹åŒº */}
              <div style={{ flex: 1, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', overflow: 'hidden', position: 'relative' }}>
                {/* æ°´å°èƒŒæ™¯ */}
                <div style={{ 
                  position: 'absolute', 
                  top: '50%', 
                  left: '50%', 
                  transform: 'translate(-50%, -50%)', 
                  fontSize: '180px', 
                  fontWeight: 'bold',
                  color: 'rgba(255, 128, 48, 0.04)',
                  letterSpacing: '30px',
                  whiteSpace: 'nowrap',
                  fontFamily: '"Microsoft YaHei", "PingFang SC", "Noto Sans SC", sans-serif',
                  pointerEvents: 'none',
                  userSelect: 'none',
                  zIndex: 0
                }}>
                  å¡çº³é…’å§
                </div>
                
                <div style={{ textAlign: 'center', marginBottom: isDisplayMode ? '8px' : '20px', position: 'relative', zIndex: 1 }}>
                  <div style={{ fontSize: isDisplayMode ? '42px' : '48px', letterSpacing: '10px', color: 'rgba(255,255,255,0.85)' }}>ç¬¬ {currentLevel + 1} çº§ / å…± {levels.length} çº§</div>
                  <div style={{ fontSize: isDisplayMode ? '16px' : '20px', letterSpacing: '5px', color: 'rgba(255,255,255,0.4)', fontFamily: 'Arial, sans-serif', marginTop: '6px' }}>LEVEL {currentLevel + 1} OF {levels.length}</div>
                </div>

                <div style={{ width: '95%', maxWidth: '750px', height: isDisplayMode ? '10px' : '8px', background: 'rgba(255,255,255,0.1)', overflow: 'hidden', marginBottom: isDisplayMode ? '12px' : '30px', borderRadius: '10px', position: 'relative', zIndex: 1 }}>
                  <div style={{ width: `${progress}%`, height: '100%', background: isLowTime ? '#e05555' : '#FF8030', transition: 'width 1s linear', opacity: 0.9 }} />
                </div>

                <div style={{ background: 'rgba(0,0,0,0.5)', padding: isDisplayMode ? '20px 60px' : '35px 80px', marginBottom: isDisplayMode ? '15px' : '35px', borderRadius: '24px', border: '2px solid rgba(255,128,48,0.3)', textAlign: 'center', position: 'relative', zIndex: 1 }}>
                  {!isRunning && timeLeft > 0 && timeLeft < current.duration * 60 && (
                    <div style={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', background: 'rgba(0,0,0,0.95)', padding: isDisplayMode ? '30px 60px' : '45px 90px', borderRadius: '28px', border: '3px solid #FF8030', zIndex: 20 }}>
                      <div style={{ fontSize: isDisplayMode ? '48px' : '64px', color: '#FF8030', letterSpacing: '14px', marginBottom: '12px' }}>æ¯”èµ›æš‚åœ</div>
                      <div style={{ fontSize: isDisplayMode ? '16px' : '22px', color: 'rgba(255,255,255,0.5)', letterSpacing: '8px', fontFamily: 'Arial, sans-serif' }}>GAME PAUSED</div>
                    </div>
                  )}
                  <div style={{ fontSize: isDisplayMode ? 'clamp(140px, 22vw, 220px)' : 'clamp(100px, 18vw, 180px)', fontWeight: 'bold', letterSpacing: '25px', color: isLowTime ? '#e05555' : '#FF8030', textShadow: isLowTime ? '0 0 50px rgba(224, 85, 85, 0.6)' : '0 0 40px rgba(255, 128, 48, 0.5)' }}>{formatTime(timeLeft)}</div>
                </div>

                <div style={{ display: 'flex', gap: isDisplayMode ? '15px' : '20px', marginBottom: isDisplayMode ? '15px' : '25px', flexWrap: 'wrap', justifyContent: 'center', position: 'relative', zIndex: 1 }}>
                  <div style={{ textAlign: 'center', background: 'rgba(0,0,0,0.45)', padding: isDisplayMode ? '15px 12px' : '20px 18px', width: isDisplayMode ? '140px' : '150px', borderRadius: '16px', border: '1px solid rgba(255,128,48,0.25)' }}>
                    <div style={{ fontSize: isDisplayMode ? '14px' : '15px', color: 'rgba(255,255,255,0.65)', letterSpacing: '2px', marginBottom: '2px' }}>å°ç›²</div>
                    <div style={{ fontSize: isDisplayMode ? '10px' : '10px', color: 'rgba(255,255,255,0.35)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif', marginBottom: isDisplayMode ? '6px' : '10px' }}>SMALL BLIND</div>
                    <div style={{ fontSize: isDisplayMode ? '40px' : '44px', color: '#FF8030', fontWeight: 'bold' }}>{current.smallBlind}</div>
                  </div>
                  <div style={{ textAlign: 'center', background: 'rgba(0,0,0,0.45)', padding: isDisplayMode ? '15px 12px' : '20px 18px', width: isDisplayMode ? '140px' : '150px', borderRadius: '16px', border: '1px solid rgba(255,128,48,0.25)' }}>
                    <div style={{ fontSize: isDisplayMode ? '14px' : '15px', color: 'rgba(255,255,255,0.65)', letterSpacing: '2px', marginBottom: '2px' }}>å¤§ç›²</div>
                    <div style={{ fontSize: isDisplayMode ? '10px' : '10px', color: 'rgba(255,255,255,0.35)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif', marginBottom: isDisplayMode ? '6px' : '10px' }}>BIG BLIND</div>
                    <div style={{ fontSize: isDisplayMode ? '40px' : '44px', color: '#FF8030', fontWeight: 'bold' }}>{current.bigBlind}</div>
                  </div>
                  {current.ante > 0 && (
                    <div style={{ textAlign: 'center', background: 'rgba(0,0,0,0.45)', padding: isDisplayMode ? '15px 12px' : '20px 18px', width: isDisplayMode ? '140px' : '150px', borderRadius: '16px', border: '1px solid rgba(255,128,48,0.25)' }}>
                      <div style={{ fontSize: isDisplayMode ? '14px' : '15px', color: 'rgba(255,255,255,0.65)', letterSpacing: '2px', marginBottom: '2px' }}>å‰æ³¨</div>
                      <div style={{ fontSize: isDisplayMode ? '10px' : '10px', color: 'rgba(255,255,255,0.35)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif', marginBottom: isDisplayMode ? '6px' : '10px' }}>ANTE</div>
                      <div style={{ fontSize: isDisplayMode ? '40px' : '44px', color: '#FF8030', fontWeight: 'bold' }}>{current.ante}</div>
                    </div>
                  )}
                  <div style={{ textAlign: 'center', background: 'rgba(0,0,0,0.45)', padding: isDisplayMode ? '15px 12px' : '20px 18px', width: isDisplayMode ? '140px' : '150px', borderRadius: '16px', border: '1px solid rgba(255,128,48,0.25)' }}>
                    <div style={{ fontSize: isDisplayMode ? '14px' : '15px', color: 'rgba(255,255,255,0.65)', letterSpacing: '2px', marginBottom: '2px' }}>å‚èµ›</div>
                    <div style={{ fontSize: isDisplayMode ? '10px' : '10px', color: 'rgba(255,255,255,0.35)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif', marginBottom: isDisplayMode ? '6px' : '10px' }}>PLAYERS</div>
                    <div style={{ fontSize: isDisplayMode ? '40px' : '44px', color: '#FF8030', fontWeight: 'bold' }}>{remainingPlayers}<span style={{ fontSize: isDisplayMode ? '20px' : '22px', color: 'rgba(255,255,255,0.4)' }}>/{totalPlayers}</span></div>
                  </div>
                  <div style={{ textAlign: 'center', background: 'rgba(0,0,0,0.45)', padding: isDisplayMode ? '15px 12px' : '20px 18px', width: isDisplayMode ? '140px' : '150px', borderRadius: '16px', border: '1px solid rgba(255,128,48,0.25)' }}>
                    <div style={{ fontSize: isDisplayMode ? '14px' : '15px', color: 'rgba(255,255,255,0.65)', letterSpacing: '2px', marginBottom: '2px' }}>å‡ç </div>
                    <div style={{ fontSize: isDisplayMode ? '10px' : '10px', color: 'rgba(255,255,255,0.35)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif', marginBottom: isDisplayMode ? '6px' : '10px' }}>AVG CHIPS</div>
                    <div style={{ fontSize: isDisplayMode ? '28px' : '32px', color: '#FF8030', fontWeight: 'bold' }}>{averageChips.toLocaleString()}</div>
                  </div>
                  <div style={{ textAlign: 'center', background: 'rgba(0,0,0,0.45)', padding: isDisplayMode ? '15px 12px' : '20px 18px', width: isDisplayMode ? '140px' : '150px', borderRadius: '16px', border: '1px solid rgba(255,128,48,0.25)' }}>
                    <div style={{ fontSize: isDisplayMode ? '14px' : '15px', color: 'rgba(255,255,255,0.65)', letterSpacing: '2px', marginBottom: '2px' }}>æ€»ç </div>
                    <div style={{ fontSize: isDisplayMode ? '10px' : '10px', color: 'rgba(255,255,255,0.35)', letterSpacing: '2px', fontFamily: 'Arial, sans-serif', marginBottom: isDisplayMode ? '6px' : '10px' }}>TOTAL</div>
                    <div style={{ fontSize: isDisplayMode ? '28px' : '32px', color: '#FF8030', fontWeight: 'bold' }}>{totalChips.toLocaleString()}</div>
                  </div>
                </div>

                {next && (
                  <div style={{ background: 'rgba(0,0,0,0.4)', padding: isDisplayMode ? '12px 35px' : '14px 40px', border: '1px solid rgba(255,128,48,0.2)', textAlign: 'center', borderRadius: '14px', position: 'relative', zIndex: 1 }}>
                    <div style={{ fontSize: isDisplayMode ? '14px' : '15px', color: 'rgba(255,255,255,0.5)', letterSpacing: '3px' }}>ä¸‹ä¸€çº§ <span style={{ fontSize: isDisplayMode ? '10px' : '11px', fontFamily: 'Arial, sans-serif' }}>NEXT LEVEL</span></div>
                    <span style={{ fontSize: isDisplayMode ? '24px' : '26px', color: 'rgba(255,128,48,0.85)', letterSpacing: '4px' }}>{next.smallBlind} / {next.bigBlind}{next.ante > 0 && ` (å‰æ³¨ ${next.ante})`}</span>
                  </div>
                )}
              </div>

              {/* å³ä¾§å¥–é‡‘åˆ†é…åŒº */}
              <div style={{ width: isDisplayMode ? '240px' : '260px', background: 'rgba(0,0,0,0.4)', borderRadius: '20px', border: '1px solid rgba(255,128,48,0.3)', padding: isDisplayMode ? '15px' : '20px', display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>
                <div style={{ textAlign: 'center', marginBottom: isDisplayMode ? '12px' : '15px', paddingBottom: isDisplayMode ? '10px' : '12px', borderBottom: '1px solid rgba(255,128,48,0.2)', flexShrink: 0 }}>
                  <div style={{ fontSize: isDisplayMode ? '18px' : '20px', color: '#FF8030', letterSpacing: '4px', fontWeight: 'bold' }}>å¥–é‡‘åˆ†é…</div>
                  <div style={{ fontSize: isDisplayMode ? '10px' : '12px', color: 'rgba(255,255,255,0.4)', fontFamily: 'Arial, sans-serif', marginTop: '4px' }}>PRIZE POOL</div>
                  <div style={{ fontSize: isDisplayMode ? '26px' : '32px', color: '#FF8030', marginTop: '10px', fontWeight: 'bold', textShadow: '0 0 20px rgba(255,128,48,0.3)' }}>{totalChips.toLocaleString()}</div>
                </div>
                <div style={{ flex: 1, display: 'flex', flexDirection: 'column', gap: isDisplayMode ? '10px' : '12px', overflowY: 'auto', overflowX: 'hidden' }}>
                  {prizeStructure.slice(0, 3).map((prize, index) => {
                    const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
                    const titles = ['å† å†›', 'äºšå†›', 'å­£å†›'];
                    const engTitles = ['CHAMPION', '2ND PLACE', '3RD PLACE'];
                    const bgColors = [
                      'linear-gradient(135deg, rgba(255,215,0,0.2) 0%, rgba(255,128,48,0.15) 100%)',
                      'linear-gradient(135deg, rgba(192,192,192,0.2) 0%, rgba(150,150,150,0.1) 100%)',
                      'linear-gradient(135deg, rgba(205,127,50,0.2) 0%, rgba(180,100,50,0.1) 100%)'
                    ];
                    const borderColors = ['rgba(255,215,0,0.6)', 'rgba(192,192,192,0.5)', 'rgba(205,127,50,0.5)'];
                    const glowColors = ['rgba(255,215,0,0.3)', 'rgba(192,192,192,0.2)', 'rgba(205,127,50,0.2)'];
                    
                    return (
                      <div key={index} style={{ 
                        width: '100%',
                        aspectRatio: '1 / 1',
                        background: bgColors[index],
                        borderRadius: '16px',
                        border: `2px solid ${borderColors[index]}`,
                        display: 'flex',
                        flexDirection: 'column',
                        alignItems: 'center',
                        justifyContent: 'center',
                        position: 'relative',
                        boxShadow: `0 4px 20px ${glowColors[index]}, inset 0 1px 0 rgba(255,255,255,0.1)`,
                        overflow: 'hidden'
                      }}>
                        {/* è£…é¥°è§’æ ‡ */}
                        <div style={{ position: 'absolute', top: '8px', left: '8px', fontSize: isDisplayMode ? '10px' : '12px', color: 'rgba(255,255,255,0.3)' }}>â™ </div>
                        <div style={{ position: 'absolute', top: '8px', right: '8px', fontSize: isDisplayMode ? '10px' : '12px', color: 'rgba(255,255,255,0.3)' }}>â™¥</div>
                        <div style={{ position: 'absolute', bottom: '8px', left: '8px', fontSize: isDisplayMode ? '10px' : '12px', color: 'rgba(255,255,255,0.3)' }}>â™¦</div>
                        <div style={{ position: 'absolute', bottom: '8px', right: '8px', fontSize: isDisplayMode ? '10px' : '12px', color: 'rgba(255,255,255,0.3)' }}>â™£</div>
                        
                        {/* å¥–ç‰Œ */}
                        <div style={{ fontSize: isDisplayMode ? '32px' : '40px', marginBottom: '5px', filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))' }}>{medals[index]}</div>
                        
                        {/* åæ¬¡ */}
                        <div style={{ fontSize: isDisplayMode ? '18px' : '22px', color: index === 0 ? '#FFD700' : index === 1 ? '#C0C0C0' : '#CD7F32', fontWeight: 'bold', letterSpacing: '3px' }}>{titles[index]}</div>
                        <div style={{ fontSize: isDisplayMode ? '8px' : '10px', color: 'rgba(255,255,255,0.4)', fontFamily: 'Arial, sans-serif', marginTop: '2px', letterSpacing: '1px' }}>{engTitles[index]}</div>
                        
                        {/* å¥–é‡‘ */}
                        <div style={{ fontSize: isDisplayMode ? '22px' : '28px', color: '#fff', fontWeight: 'bold', marginTop: '8px', textShadow: '0 2px 10px rgba(0,0,0,0.5)' }}>{Math.round(totalChips * prize.percent / 100).toLocaleString()}</div>
                        <div style={{ fontSize: isDisplayMode ? '11px' : '13px', color: 'rgba(255,255,255,0.5)', marginTop: '2px' }}>{prize.percent}% å¥–æ± </div>
                      </div>
                    );
                  })}
                </div>
              </div>
            </div>
          )}

          {/* Control Panel - Only in Control Mode */}
          {!isDisplayMode && (
            <div style={{ position: 'fixed', bottom: 0, left: 0, right: 0, zIndex: 100 }}>
              <div style={{ display: 'flex', justifyContent: 'center' }}>
                <button onClick={() => setShowControlPanel(!showControlPanel)} style={{ background: 'rgba(26, 26, 26, 0.95)', border: '1px solid rgba(255,128,48,0.3)', borderBottom: 'none', color: '#FF8030', padding: '6px 40px', cursor: 'pointer', fontSize: '16px', borderRadius: '12px 12px 0 0' }}>{showControlPanel ? 'â–¼' : 'â–²'}</button>
              </div>
              {showControlPanel && (
                <div style={{ background: 'rgba(26, 26, 26, 0.98)', borderTop: '1px solid rgba(255,128,48,0.3)', padding: '15px 40px' }}>
                  <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '15px', flexWrap: 'wrap' }}>
                    <button onClick={openDisplayWindow} style={{ background: 'rgba(80,160,80,0.3)', border: '2px solid rgba(80,160,80,0.8)', color: '#50a050', padding: '10px 15px', cursor: 'pointer', fontSize: '12px', letterSpacing: '1px', fontFamily: 'inherit', textAlign: 'center', borderRadius: '12px' }}>ğŸ“º æ‰“å¼€è§‚ä¼—çª—å£<br/><span style={{ fontSize: '9px', opacity: 0.7, fontFamily: 'Arial, sans-serif' }}>OPEN DISPLAY</span></button>
                    <div style={{ width: '1px', height: '40px', background: 'rgba(255,128,48,0.3)' }} />
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', background: 'rgba(0,0,0,0.3)', padding: '8px 15px', borderRadius: '12px' }}>
                      <span style={{ color: 'rgba(255,255,255,0.6)', fontSize: '12px', textAlign: 'center' }}>äººæ•°<br/><span style={{ fontSize: '9px' }}>PLAYERS</span></span>
                      <button onClick={handlePlayerOut} style={{ background: '#e05555', border: 'none', color: '#fff', width: '36px', height: '36px', cursor: 'pointer', fontSize: '20px', borderRadius: '8px', fontWeight: 'bold' }}>-</button>
                      <span style={{ color: '#FF8030', fontSize: '20px', minWidth: '40px', textAlign: 'center' }}>{remainingPlayers}</span>
                      <button onClick={handlePlayerBack} style={{ background: '#50a050', border: 'none', color: '#fff', width: '36px', height: '36px', cursor: 'pointer', fontSize: '20px', borderRadius: '8px', fontWeight: 'bold' }}>+</button>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', background: 'rgba(0,0,0,0.3)', padding: '8px 15px', borderRadius: '12px' }}>
                      <span style={{ color: 'rgba(255,255,255,0.6)', fontSize: '12px', textAlign: 'center' }}>ç­¹ç <br/><span style={{ fontSize: '9px' }}>CHIPS</span></span>
                      <button onClick={handleChipsRemove} style={{ background: '#e05555', border: 'none', color: '#fff', width: '36px', height: '36px', cursor: 'pointer', fontSize: '20px', borderRadius: '8px', fontWeight: 'bold' }}>-</button>
                      <span style={{ color: '#FF8030', fontSize: '16px', minWidth: '70px', textAlign: 'center' }}>{(totalChips/1000).toFixed(0)}K</span>
                      <button onClick={handleChipsAdd} style={{ background: '#50a050', border: 'none', color: '#fff', width: '36px', height: '36px', cursor: 'pointer', fontSize: '20px', borderRadius: '8px', fontWeight: 'bold' }}>+</button>
                    </div>
                    <div style={{ width: '1px', height: '40px', background: 'rgba(255,128,48,0.3)' }} />
                    <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>
                      <button onClick={handlePrevLevel} style={{...controlButtonStyle, padding: '10px 15px', width: '100px', fontSize: '14px'}}>â—€ ä¸Šä¸€çº§<br/><span style={buttonSubtextStyle}>PREV</span></button>
                      {isRunning ? (
                        <button onClick={handlePause} style={{ ...controlButtonStyle, padding: '10px 15px', width: '100px', fontSize: '14px', background: 'rgba(255,128,48,0.2)', borderColor: 'rgba(255,128,48,0.6)' }}>â¸ æš‚åœ<br/><span style={buttonSubtextStyle}>PAUSE</span></button>
                      ) : (
                        <button onClick={handleStart} style={{ ...controlButtonStyle, padding: '10px 15px', width: '100px', fontSize: '14px', background: 'rgba(255,128,48,0.2)', borderColor: 'rgba(255,128,48,0.6)' }}>â–¶ å¼€å§‹<br/><span style={buttonSubtextStyle}>START</span></button>
                      )}
                      <button onClick={handleReset} style={{...controlButtonStyle, padding: '10px 15px', width: '100px', fontSize: '14px'}}>â†º é‡ç½®<br/><span style={buttonSubtextStyle}>RESET</span></button>
                      <button onClick={handleNextLevel} style={{...controlButtonStyle, padding: '10px 15px', width: '100px', fontSize: '14px'}}>ä¸‹ä¸€çº§ â–¶<br/><span style={buttonSubtextStyle}>NEXT</span></button>
                    </div>
                    <div style={{ width: '1px', height: '40px', background: 'rgba(255,128,48,0.3)' }} />
                    <button onClick={() => setShowSettings(!showSettings)} style={{ background: showSettings ? 'rgba(255,128,48,0.2)' : 'transparent', border: '2px solid rgba(255,128,48,0.6)', color: '#FF8030', padding: '10px 20px', cursor: 'pointer', fontSize: '14px', letterSpacing: '2px', fontFamily: 'inherit', textAlign: 'center', borderRadius: '14px' }}>âš™ è®¾ç½®<br/><span style={{ fontSize: '9px', opacity: 0.7, fontFamily: 'Arial, sans-serif' }}>SETTINGS</span></button>
                  </div>
                </div>
              )}
            </div>
          )}

          {/* Confirm Dialog - Only in Control Mode */}
          {!isDisplayMode && confirmDialog.show && (
            <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.8)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 200 }}>
              <div style={{ background: 'rgba(26, 26, 26, 0.98)', padding: '40px 60px', borderRadius: '20px', border: '2px solid #FF8030', textAlign: 'center', maxWidth: '400px' }}>
                <div style={{ fontSize: '24px', color: '#e0e0e0', marginBottom: '30px', whiteSpace: 'pre-line', lineHeight: '1.5' }}>{confirmDialog.message}</div>
                <div style={{ display: 'flex', gap: '20px', justifyContent: 'center' }}>
                  <button onClick={() => setConfirmDialog({ show: false, message: '', onConfirm: null })} style={{ background: 'transparent', border: '2px solid rgba(255,255,255,0.3)', color: '#e0e0e0', padding: '12px 40px', cursor: 'pointer', fontSize: '18px', borderRadius: '12px' }}>å–æ¶ˆ<br/><span style={{ fontSize: '12px', opacity: 0.6 }}>CANCEL</span></button>
                  <button onClick={confirmDialog.onConfirm} style={{ background: '#FF8030', border: 'none', color: '#1a1a1a', padding: '12px 40px', cursor: 'pointer', fontSize: '18px', borderRadius: '12px', fontWeight: 'bold' }}>ç¡®è®¤<br/><span style={{ fontSize: '12px', opacity: 0.7 }}>CONFIRM</span></button>
                </div>
              </div>
            </div>
          )}

          <style>{`
            input:focus { outline: none; border-color: #FF8030 !important; box-shadow: 0 0 10px rgba(255, 128, 48, 0.3); }
            button:hover { opacity: 0.9; }
            @keyframes levelUpPulse {
              0%, 100% { transform: translate(-50%, -50%) scale(1); }
              50% { transform: translate(-50%, -50%) scale(1.05); }
            }
            @keyframes borderGlow {
              0%, 100% { box-shadow: 0 0 30px rgba(255, 128, 48, 0.5), inset 0 0 30px rgba(255, 128, 48, 0.1); }
              50% { box-shadow: 0 0 60px rgba(255, 128, 48, 0.8), inset 0 0 60px rgba(255, 128, 48, 0.2); }
            }
            @keyframes textGlow {
              0%, 100% { text-shadow: 0 0 20px rgba(255, 128, 48, 0.8); }
              50% { text-shadow: 0 0 40px rgba(255, 128, 48, 1), 0 0 80px rgba(255, 128, 48, 0.5); }
            }
          `}</style>

          {/* ç›²æ³¨å‡çº§å…¨å±å¼¹çª— */}
          {showLevelUp && newLevelInfo && (
            <div style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              background: 'rgba(0, 0, 0, 0.9)',
              display: 'flex',
              justifyContent: 'center',
              alignItems: 'center',
              zIndex: 1000,
            }}>
              <div style={{
                position: 'absolute',
                top: '50%',
                left: '50%',
                transform: 'translate(-50%, -50%)',
                textAlign: 'center',
                animation: 'levelUpPulse 1s ease-in-out infinite',
              }}>
                <div style={{
                  fontSize: '80px',
                  color: '#FF8030',
                  letterSpacing: '20px',
                  marginBottom: '30px',
                  fontWeight: 'bold',
                  animation: 'textGlow 1.5s ease-in-out infinite',
                }}>
                  ç›²æ³¨å‡çº§
                </div>
                <div style={{
                  fontSize: '36px',
                  color: 'rgba(255, 255, 255, 0.6)',
                  letterSpacing: '8px',
                  marginBottom: '50px',
                  fontFamily: 'Arial, sans-serif',
                }}>
                  LEVEL UP
                </div>
                <div style={{
                  background: 'rgba(255, 128, 48, 0.15)',
                  border: '3px solid #FF8030',
                  borderRadius: '30px',
                  padding: '40px 80px',
                  animation: 'borderGlow 1.5s ease-in-out infinite',
                }}>
                  <div style={{
                    fontSize: '48px',
                    color: 'rgba(255, 255, 255, 0.8)',
                    marginBottom: '20px',
                    letterSpacing: '5px',
                  }}>
                    ç¬¬ {newLevelInfo.level} çº§
                  </div>
                  <div style={{
                    fontSize: '100px',
                    color: '#FF8030',
                    fontWeight: 'bold',
                    letterSpacing: '10px',
                  }}>
                    {newLevelInfo.smallBlind} / {newLevelInfo.bigBlind}
                  </div>
                  {newLevelInfo.ante > 0 && (
                    <div style={{
                      fontSize: '36px',
                      color: 'rgba(255, 255, 255, 0.6)',
                      marginTop: '20px',
                      letterSpacing: '5px',
                    }}>
                      å‰æ³¨ {newLevelInfo.ante}
                    </div>
                  )}
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<PokerTournamentTimer />);
  </script>
</body>
</html>
